{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/andre/Documents/Studier/accessible-drinks/src/app/components/SearchCombo.tsx"],"sourcesContent":["'use client';\n\nimport {\n  Combobox,\n  ComboboxInput,\n  ComboboxOption,\n  ComboboxOptions,\n} from '@headlessui/react';\nimport { MagnifyingGlassIcon } from '@heroicons/react/20/solid';\nimport { useState, useEffect } from 'react';\nimport searchLoader from '../utils/searchLoader';\nimport { useRouter } from 'next/navigation';\n\ntype Drink = {\n  idDrink: string;\n  strDrink: string;\n};\n\nexport default function SearchCombo() {\n  const [query, setQuery] = useState('');\n  const [drinks, setDrinks] = useState<Drink[]>([]);\n  const [isOpen, setIsOpen] = useState(false);\n  const router = useRouter();\n\n  useEffect(() => {\n    const fetchDrinks = async () => {\n      if (query !== '') {\n        const drinks = await searchLoader(query);\n        setDrinks(drinks);\n        setIsOpen(true);\n      } else {\n        setDrinks([]);\n        setIsOpen(false);\n      }\n    };\n\n    fetchDrinks();\n  }, [query]);\n\n  const filteredDrinks =\n    query === ''\n      ? []\n      : drinks.filter(drink =>\n          drink.strDrink.toLowerCase().includes(query.toLowerCase())\n        );\n\n  const handleViewAllResults = () => {\n    router.push(`/search-results/${query}`);\n  };\n\n  const handleDrinkSelect = (drink: Drink | 'see-all-results') => {\n    if (drink === 'see-all-results') {\n      handleViewAllResults();\n    } else if (drink.idDrink !== null) {\n      router.push(`/search-results/drink/${drink.idDrink}`);\n    }\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.key === 'Escape') {\n      // Close the combobox on Escape without selecting\n      setIsOpen(false);\n      setQuery('');\n    } else if (event.key === 'Tab') {\n      // Close the combobox without triggering a selection\n      setIsOpen(false);\n    } else if (event.key === 'Enter' && filteredDrinks.length > 0) {\n      // Explicitly handle selection on Enter key press\n      const selectedDrink = filteredDrinks.find(\n        drink => drink.strDrink.toLowerCase() === query.toLowerCase()\n      );\n      if (selectedDrink) {\n        handleDrinkSelect(selectedDrink);\n      }\n    }\n  };\n\n  return (\n    <Combobox as=\"div\" onChange={handleDrinkSelect}>\n      <div className=\"relative\">\n        <MagnifyingGlassIcon\n          className=\"pointer-events-none absolute left-4 top-3.5 h-5 w-5 text-gray-400\"\n          aria-hidden=\"true\"\n        />\n        <ComboboxInput\n          autoFocus\n          className=\"h-12 w-full border-0 bg-transparent pl-11 pr-4 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm\"\n          placeholder=\"Search for a drink...\"\n          onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n            setQuery(event.target.value)\n          }\n          onKeyDown={handleKeyDown}\n          onBlur={() => setIsOpen(false)}\n          aria-expanded={isOpen}\n          aria-controls=\"combobox-options\"\n        />\n      </div>\n\n      {isOpen && (query !== '' || filteredDrinks.length > 0) && (\n        <ComboboxOptions\n          static\n          id=\"combobox-options\"\n          className=\"max-h-72 overflow-y-auto py-2 text-sm text-gray-800\"\n        >\n          <ComboboxOption\n            key=\"view-all-search-results\"\n            value=\"see-all-results\"\n            className={({ active }) =>\n              `cursor-pointer select-none bg-gray-100 px-4 py-2 ${\n                active ? 'bg-indigo-600 text-white' : ''\n              }`\n            }\n          >\n            View all search results\n          </ComboboxOption>\n\n          {filteredDrinks.map(drink => (\n            <ComboboxOption\n              key={drink.idDrink}\n              value={drink}\n              className={({ active, selected }) =>\n                `cursor-pointer select-none px-4 py-2 ${\n                  selected\n                    ? 'bg-indigo-600 text-white'\n                    : active\n                      ? 'bg-indigo-500 text-white'\n                      : ''\n                }`\n              }\n            >\n              {drink.strDrink}\n            </ComboboxOption>\n          ))}\n        </ComboboxOptions>\n      )}\n\n      {query !== '' && filteredDrinks.length === 0 && (\n        <p className=\"p-4 text-sm text-gray-500\">No drinks found.</p>\n      )}\n    </Combobox>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}